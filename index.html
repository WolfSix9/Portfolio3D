<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio 3D Model Viewer - FPS Mode</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
        }

        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            color: #fff;
            font-family: sans-serif;
            font-size: 22px;
            z-index: 10;
        }
    </style>
</head>

<body>
    <div id="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏•...</div>
    <!-- üîπ ‡πÄ‡∏ü‡∏£‡∏°‡∏ö‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -->
    <div id="controlsFrame">
        <h3>üéÆ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</h3>
        <div>‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤ / ‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á : <code>W</code> / <code>S</code></div>
        <div>‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏ß‡∏ã‡πâ‡∏≤‡∏¢ / ‡∏Ç‡∏ß‡∏≤ : <code>A</code> / <code>D</code></div>
        <div>‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß : <code>Shift</code></div>
        <div>‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î : <code>Space</code></div>
        <div>‡∏´‡∏°‡∏∏‡∏ô‡∏°‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á : <code>‡πÄ‡∏°‡∏≤‡∏™‡πå</code></div>
        <div>‡∏Ñ‡∏•‡∏¥‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Lock ‡πÄ‡∏°‡∏≤‡∏™‡πå</div>
    </div>

    <style>
        #controlsFrame {
            position: fixed;
            top: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 12px 18px;
            font-size: 14px;
            line-height: 1.6;
            color: #fff;
            z-index: 20;
            backdrop-filter: blur(4px);
            font-family: 'Kanit', sans-serif;
        }

        #controlsFrame h3 {
            margin: 0 0 6px 0;
            font-size: 15px;
            color: #ffd966;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 4px;
        }

        #controlsFrame code {
            color: #00ffff;
        }
    </style>

    <!-- ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/RGBELoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lil-gui@0.17/dist/lil-gui.umd.min.js"></script>

    <script>
        // -------------------------------
        // Renderer
        // -------------------------------
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.outputEncoding = THREE.sRGBEncoding;
        document.body.appendChild(renderer.domElement);

        // -------------------------------
        // Scene + Camera
        // -------------------------------
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(-50, 0, 150); // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡∏≤

        // -------------------------------
        // Light
        // -------------------------------
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.0);
        scene.add(ambientLight);
        const dirLight = new THREE.DirectionalLight(0xffffff, 1.5);
        dirLight.position.set(10, 15, 10);
        dirLight.castShadow = true;
        scene.add(dirLight);

        // -------------------------------
        // Background HDRI
        // -------------------------------
        const rgbeLoader = new THREE.RGBELoader();
        rgbeLoader.setDataType(THREE.UnsignedByteType);
        rgbeLoader.load(
            "https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/qwantani_dusk_1_puresky_1k.hdr",
            (texture) => {
                texture.mapping = THREE.EquirectangularReflectionMapping;
                scene.background = texture;
                scene.environment = texture;
            }
        );

        // -------------------------------
        // Load Model: home.obj
        // -------------------------------
        const mtlLoader = new THREE.MTLLoader();
        mtlLoader.setPath("Model/");
        mtlLoader.load("home.mtl", (materials) => {
            materials.preload();
            for (let key in materials.materials) {
                let mat = materials.materials[key];
                mat.transparent = false;
                mat.opacity = 1.0;
            }

            const objLoader = new THREE.OBJLoader();
            objLoader.setMaterials(materials);
            objLoader.setPath("Model/");
            objLoader.load(
                "home.obj",
                (object) => {
                    object.traverse((child) => {
                        if (child.isMesh) {
                            child.castShadow = true;
                            child.receiveShadow = true;
                            child.material.transparent = false;
                            child.material.opacity = 1.0;
                        }
                    });
                    object.scale.set(50, 50, 50);
                    object.position.set(0, 0, 0);
                    scene.add(object);
                    document.getElementById("loading").style.display = "none";
                },
                (xhr) => {
                    document.getElementById("loading").innerText =
                        "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î... " + Math.round((xhr.loaded / xhr.total) * 100) + "%";
                },
                (error) => {
                    console.error("‚ùå ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", error);
                    document.getElementById("loading").innerText =
                        "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏•!";
                }
            );
        });

        // -------------------------------
        // Load Model: nameboard.obj
        // -------------------------------
        const mtlLoader2 = new THREE.MTLLoader();
        mtlLoader2.setPath("Model/");
        mtlLoader2.load("nameboard.mtl", (materials) => {
            materials.preload();

            const objLoader2 = new THREE.OBJLoader();
            objLoader2.setMaterials(materials);
            objLoader2.setPath("Model/");
            objLoader2.load(
                "nameboard.obj",
                (object2) => {
                    object2.scale.set(5, 5, 5);
                    object2.position.set(200, -20, -50);

                    object2.traverse((child) => {
                        if (child.isMesh) {
                            child.material.transparent = false;
                            child.material.opacity = 1.0;
                            child.material.color.multiplyScalar(1.4);
                            child.castShadow = true;
                            child.receiveShadow = true;
                        }
                    });

                    scene.add(object2);
                },
                (xhr) => {
                    console.log("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î nameboard:", (xhr.loaded / xhr.total) * 100 + "% loaded");
                },
                (error) => {
                    console.error("‚ùå ‡πÇ‡∏´‡∏•‡∏î nameboard.obj ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", error);
                }
            );
        });
        const mtlLoader3 = new THREE.MTLLoader();
        mtlLoader2.setPath("Model/");
        mtlLoader2.load("aboutMe.mtl", (materials) => {
            materials.preload();

            const objLoader2 = new THREE.OBJLoader();
            objLoader2.setMaterials(materials);
            objLoader2.setPath("Model/");
            objLoader2.load(
                "aboutMe.obj",
                (object2) => {
                    object2.scale.set(20, 20, 20);
                    object2.position.set(-80, 70, 100);
                    object2.name = "aboutMe"; // ‚Üê ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å
                    scene.add(object2);
                },
            );
        });
        const mtlLoader5 = new THREE.MTLLoader();
        mtlLoader2.setPath("Model/");
        mtlLoader2.load("PBR.mtl", (materials) => {
            materials.preload();

            const objLoader2 = new THREE.OBJLoader();
            objLoader2.setMaterials(materials);
            objLoader2.setPath("Model/");
            objLoader2.load(
                "PBR.obj",
                (object2) => {
                    object2.scale.set(10, 10, 10);
                    object2.position.set(-80, 50, 100);
                    object2.name = "PBR"; // ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å
                    scene.add(object2);
                },
            );
        });


        const mtlLoader6 = new THREE.MTLLoader();
        mtlLoader2.setPath("Model/");
        mtlLoader2.load("Back.mtl", (materials) => {
            materials.preload();

            const objLoader2 = new THREE.OBJLoader();
            objLoader2.setMaterials(materials);
            objLoader2.setPath("Model/");
            objLoader2.load(
                "Back.obj",
                (object2) => {
                    object2.scale.set(10, 10, 10);
                    object2.position.set(300, 70, -250);
                    object2.name = "Back"; // ‚Üê ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å
                    scene.add(object2);
                },
            );
        });
        const mtlLoader7 = new THREE.MTLLoader();
        mtlLoader2.setPath("Model/");
        mtlLoader2.load("Back.mtl", (materials) => {
            materials.preload();

            const objLoader2 = new THREE.OBJLoader();
            objLoader2.setMaterials(materials);
            objLoader2.setPath("Model/");
            objLoader2.load(
                "Back.obj",
                (object2) => {
                    object2.scale.set(10, 10, 10);
                    object2.position.set(-270, 70, -140);
                    object2.name = "Back"; // ‚Üê ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å
                    scene.add(object2);
                },
            );
        });

        let kuModel;
        const mtlLoader4 = new THREE.MTLLoader();
        mtlLoader4.setPath("Model/");
        mtlLoader4.load("Ku.mtl", (materials) => {
            materials.preload();

            const objLoader2 = new THREE.OBJLoader();
            objLoader2.setMaterials(materials);
            objLoader2.setPath("Model/");
            objLoader2.load(
                "Ku.obj",
                (object2) => {
                    object2.scale.set(80, 80, 80);
                    object2.position.set(-300, 10, -150);
                    object2.name = "kuModel";

                     object2.traverse((child) => {
                if (child.isMesh) {
                    child.material = new THREE.MeshStandardMaterial({
                        color: 0x21723e,  
                        roughness: 0.3,   // ‡∏Å‡∏≤‡∏£‡∏Ç‡∏£‡∏∏‡∏Ç‡∏£‡∏∞‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß
                        metalness: 1,   // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏•‡∏´‡∏∞
                        envMap: scene.background,  // ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡πÉ‡∏ô‡∏â‡∏≤‡∏Å
                        reflectivity: 1  // ‡∏Å‡∏≤‡∏£‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡πÅ‡∏™‡∏á
                    });

                    child.castShadow = true;
                    child.receiveShadow = true;
                }
            });
                    kuModel = object2;
                    scene.add(object2);
                },
            );
        });


        // -------------------- ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏•‡∏¥‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏• aboutMe ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏¢‡πâ‡∏≤‡∏¢ --------------------

        // üîπ ‡∏ï‡∏±‡∏ß‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Raycast
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        // üîπ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏∏‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏∞‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ô‡∏µ‡πâ 
        const cameraPoints1 = {
            aboutMe: {
                pos: new THREE.Vector3(250, -100, -150), // ‚Üê ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÑ‡∏õ
                rotY: Math.PI / -2                    // ‚Üê ‡∏õ‡∏£‡∏±‡∏ö‡∏°‡∏∏‡∏°‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á (‡∏£‡∏±‡∏®‡∏°‡∏µ)
            }
        };

        // üîπ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•
        function moveCameraTo(target) {
            const targetPos = cameraPoints[target].pos.clone();
            const targetRotY = cameraPoints[target].rotY;

            const startPos = camera.position.clone();
            const startRotY = camera.rotation.y;

            const duration = 60; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ü‡∏£‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô
            let frame = 0;

            function animateMove() {
                frame++;
                const t = frame / duration;

                // ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏∏‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•
                camera.position.lerpVectors(startPos, targetPos, t);
                camera.rotation.y = THREE.MathUtils.lerp(startRotY, targetRotY, t);

                if (t < 1) requestAnimationFrame(animateMove);
            }

            animateMove();
        }

        // -------------------- ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å --------------------
        window.addEventListener("click", (event) => {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(scene.children, true);

            if (intersects.length > 0) {
                const clicked = intersects[0].object;
                console.log("ü™ß Clicked:", clicked.name);

                if (clicked.name === "aboutMe" || clicked.parent.name === "aboutMe") {
                    moveCameraTo("aboutMe");
                }
                if (clicked.name === "Back" || clicked.parent.name === "Back") {
                    moveCameraTo("Back");
                }
                if (clicked.name === "PBR" || clicked.parent.name === "PBR") {
                    moveCameraTo("PBR");
                }

            }
        });

        // -------------------------------
        // üîπ FPS Controls: ‡πÄ‡∏î‡∏¥‡∏ô ‡∏ß‡∏¥‡πà‡∏á ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î
        // -------------------------------
        let moveForward = false,
            moveBackward = false,
            moveLeft = false,
            moveRight = false,
            isRunning = false,
            isJumping = false;

        const baseSpeed = 0.50; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏î‡∏¥‡∏ô
        let speed = baseSpeed;
        const jumpPower = 0.80; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î
        let velocityY = 0;
        const gravity = 0.01; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á

        const forwardVec = new THREE.Vector3();
        const rightVec = new THREE.Vector3();

        let cameraY = 80; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
        const groundY = 80; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏û‡∏∑‡πâ‡∏ô (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏∑‡∏ô)

        // -------------------------------
        // Keyboard Control
        // -------------------------------
        document.addEventListener("keydown", (e) => {
            switch (e.code) {
                case "KeyW": moveForward = true; break;
                case "KeyS": moveBackward = true; break;
                case "KeyA": moveLeft = true; break;
                case "KeyD": moveRight = true; break;
                case "ShiftLeft": isRunning = true; break;
                case "Space":
                    if (!isJumping) {
                        isJumping = true;
                        velocityY = jumpPower;
                    }
                    break;
            }
        });

        document.addEventListener("keyup", (e) => {
            switch (e.code) {
                case "KeyW": moveForward = false; break;
                case "KeyS": moveBackward = false; break;
                case "KeyA": moveLeft = false; break;
                case "KeyD": moveRight = false; break;
                case "ShiftLeft": isRunning = false; break;
            }
        });

        // -------------------------------
        // Mouse Look (‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á-‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
        // -------------------------------
        document.body.requestPointerLock =
            document.body.requestPointerLock || document.body.mozRequestPointerLock;
        document.body.onclick = () => document.body.requestPointerLock();

        document.addEventListener("mousemove", (e) => {
            if (document.pointerLockElement === document.body) {
                // ‡∏´‡∏°‡∏∏‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (y-axis)
                camera.rotation.y -= e.movementX * 0.0001;

                // ‡∏´‡∏°‡∏∏‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á (x-axis)
                camera.rotation.x -= e.movementY * 0.0001;

                // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô/‡∏•‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
                camera.rotation.x = Math.max(-Math.PI / 1.7, Math.min(Math.PI / 1.7, camera.rotation.x));

                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ó‡∏∞‡πÅ‡∏¢‡∏á (‡πÑ‡∏°‡πà‡∏´‡∏°‡∏∏‡∏ô‡πÅ‡∏Å‡∏ô z)
                camera.rotation.z = 0;
            }
        });

        // -------------------------------
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß FPS
        // -------------------------------
        function updateMovement() {
            const moveZ = (moveForward ? 1 : 0) - (moveBackward ? 1 : 0);
            const moveX = (moveRight ? 1 : 0) - (moveLeft ? 1 : 0);

            speed = isRunning ? baseSpeed * 2.2 : baseSpeed;

            if (moveZ !== 0 || moveX !== 0) {
                camera.getWorldDirection(forwardVec);
                forwardVec.y = 0;
                forwardVec.normalize();

                rightVec.crossVectors(forwardVec, camera.up).normalize();

                camera.position.addScaledVector(forwardVec, moveZ * speed);
                camera.position.addScaledVector(rightVec, moveX * speed);
            }
            // ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î + ‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á
            if (isJumping) {
                cameraY += velocityY;
                velocityY -= gravity;

                if (cameraY <= groundY) {
                    cameraY = groundY;
                    isJumping = false;
                    velocityY = 0;
                }
            }

            camera.position.y = cameraY;
        }

        // -------------------------------
        // dat.GUI ‡πÅ‡∏™‡∏á
        // -------------------------------
        const gui = new lil.GUI({ width: 300 });
        const lightFolder = gui.addFolder("Light");
        lightFolder.add(dirLight, "intensity", 0, 3, 0.1).name("Directional Light");
        lightFolder.add(dirLight.position, "x", -50, 50, 1).name("Dir X");
        lightFolder.add(dirLight.position, "y", -50, 50, 1).name("Dir Y");
        lightFolder.add(dirLight.position, "z", -50, 50, 1).name("Dir Z");
        lightFolder.open();

        // -------------------------------
        // Render Loop
        // -------------------------------
        function animate() {
            requestAnimationFrame(animate);
            updateMovement(); // ‡πÄ‡∏î‡∏¥‡∏ô ‡∏ß‡∏¥‡πà‡∏á ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î

            // ‚úÖ ‡∏´‡∏°‡∏∏‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏• KU ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
            if (kuModel) {
                kuModel.rotation.y += 0.005; // ‡∏´‡∏°‡∏∏‡∏ô‡∏£‡∏≠‡∏ö‡πÅ‡∏Å‡∏ô Y
            }

            renderer.render(scene, camera);
        }
        animate();

        // -------------------------------
        // Resize Handler
        // -------------------------------
        window.addEventListener("resize", () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // üîπ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏∏‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏•
        const cameraPoints = {
    aboutMe: {
        pos: new THREE.Vector3(250, -100, -160),
        rotY: Math.PI / -2
    },
    PBR: {
        pos: new THREE.Vector3(-250, 10, -100), // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
        rotY: Math.PI / 4 // ‡∏õ‡∏£‡∏±‡∏ö‡∏°‡∏∏‡∏°‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á
    },
    Back: {
                pos: new THREE.Vector3(-50, 0, 150),
                rotY: 0
            }
    
};

        function animate() {
            requestAnimationFrame(animate);
            updateMovement(); // ‡πÄ‡∏î‡∏¥‡∏ô ‡∏ß‡∏¥‡πà‡∏á ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î

            // ‚úÖ ‡∏´‡∏°‡∏∏‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏• KU ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
            if (kuModel) {
                kuModel.rotation.y += 0.005; // ‡∏´‡∏°‡∏∏‡∏ô‡∏£‡∏≠‡∏ö‡πÅ‡∏Å‡∏ô Y
            }

            renderer.render(scene, camera);
        }
        animate();

    </script>
</body>

</html>
